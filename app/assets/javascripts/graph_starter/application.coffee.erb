#= require jquery
#= require jquery_ujs
#= require turbolinks
#= require graph_starter/underscore
#= require graph_starter/ember
#= require graph_starter/ember-template-compiler
#= require semantic-ui


ready = ->
  $('#loading-spinner').hide()

  $("img").error ->
    console.log 'imgError!!!!'

    img = $(@)

    img.attr('src', <%= asset_path("missing.png").to_json %>)
    img.css('padding', '40px')
    img.insertBefore("")
    img.unbind('error')

  $('.message > .close').on 'click', ->
    $(@).closest('.message').transition('fade')

$(document).ready ready
$(document).on 'page:load', ready

$(document).on 'page:fetch', (e) ->
  $('#loading-spinner').css 'display', 'inline-block'

